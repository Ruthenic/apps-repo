<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Homebrew Channel</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">webOS Homebrew Project</a></h1>
                <nav><ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/apps">Applications</a></li>
                    <li><a href="/submit">Submit Application</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">Homebrew Channel</h1>
    
    <style>
    section#content img {
        max-width: 100%;
    }
</style>

<h2>Features</h2>
<ul>
<li>
<p>Independent webOS package repository</p>
<ul>
<li>Homebrew discovery, installation &amp; updates</li>
</ul>
</li>
<li>
<p>(root) Root execution service that can be easily used by webOS homebrew
  developers without a need of separate privilege escalation handling (<code>luna://org.webosbrew.hbchannel.service/exec</code>)</p>
</li>
<li>(root) Disable some telemetry</li>
<li>(root) Startup user hooks (executable scripts present in <code>/var/lib/webosbrew/init.d</code> are run on bootup)</li>
<li>(root) Remote access<ul>
<li>SSH - public key authenticated (with default <code>alpine</code> password until
  authorized keys are provisioned)</li>
<li>Telnet - unauthenticated, use sparingly</li>
</ul>
</li>
<li>(root) Failsafe mode<ul>
<li>In case a device crashes on boot only an emergency shell will be exposed
  via telnet. In order to disable it fix the original crash cause and remove
  <code>/var/luna/preferences/webosbrew_failsafe</code> flag file.</li>
</ul>
</li>
</ul>
<h2>Development</h2>
<h3>Environment</h3>
<p>Some libraries used by this project are submodules of this repository. Use
following command when cloning:</p>
<div class="highlight"><pre><span></span><code>git clone --recursive https://github.com/webosbrew/webos-homebrew-channel
</code></pre></div>

<p>All required development packages are distributed via npm. In order to install
them in a local directory run:</p>
<div class="highlight"><pre><span></span><code>npm install
</code></pre></div>

<h3>Technology stack</h3>
<p>Frontend is based on last development version of <a href="https://github.com/enyojs">enyo</a>.
(dated january 2017) While this definitely is not the cool and jazzy latest
technology, it provides us with a sensible UI toolkit for TV-based application
that seems to work pretty well with versions of webOS as old as 1.x. We are
currently using enyo built-in <code>enyo-dev</code> packager. This requires us to write
code that'll be run directly on target platforms (no babel/transpilation of newer
ES dialects - no arrow functions, no const, no promises, etc.). In the future
we may migrate to some webpack-based solution around that.</p>
<p>Service is packaged using webpack &amp; babel, thus, with enough shims and patches,
we can write and use some modern ES features (like Promises, arrow functions,
async functions, const, etc.) while targeting NodeJS 0.10 (used on earliest
webOS versions)</p>
<h3>Production build</h3>
<div class="highlight"><pre><span></span><code>rm -rf dist <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run build -- --production <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run build-service -- --env production <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run package
</code></pre></div>

<h3>Full application testing / deployment</h3>
<div class="highlight"><pre><span></span><code>rm -rf dist <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run build <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run build-service <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run package <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run deploy <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> npm run launch
ssh root@10.0.0.2 -p <span class="m">9922</span> /media/developer/apps/usr/palm/services/org.webosbrew.hbchannel.service/elevate-service
</code></pre></div>

<h3>Service testing</h3>
<div class="highlight"><pre><span></span><code>npm run build-service <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> <span class="se">\</span>
    cat dist/services/service.js <span class="p">|</span> ssh root@10.0.0.2 -p <span class="m">9922</span> sh -c <span class="s1">&#39;cat &amp;gt; /media/developer/apps/usr/palm/services/org.webosbrew.hbchannel.service/service.js &amp;amp;&amp;amp; pkill -f org.webosbrew.hbchannel.service&#39;</span>
ssh root@10.0.0.2 -p <span class="m">9922</span> /usr/bin/run-js-service -k -n /media/developer/apps/usr/palm/services/org.webosbrew.hbchannel.service
</code></pre></div>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://github.com/webosbrew/">webOS Homebrew</a></li>
                            <li><a href="https://openlgtv.github.io/">openlgtv</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://discord.gg/xWqRVEm">openlgtv Discord</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>